(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6db636c9"],{"0873":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"loading-overlay"},[e("div",{staticClass:"loading-spinner"}),e("h3",[t._v("加载中"),e("span",{staticClass:"dots"},[t._v(t._s(t.dots))])])])},s=[],n={name:"Loading",data(){return{dotCount:1,dots:"."}},mounted(){this.dotInterval=setInterval(()=>{this.dotCount=this.dotCount%3+1,this.dots=".".repeat(this.dotCount)},500)},beforeUnmount(){clearInterval(this.dotInterval)}},o=n,l=(a("be96"),a("2877")),r=Object(l["a"])(o,i,s,!1,null,"086c7a5b",null);e["a"]=r.exports},"24aa":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.isScroll,expression:"isScroll"}],staticClass:"back-to-top",on:{click:t.backToTop}},[e("span",{staticClass:"icon iconfont icon-xiangshang"},[t._v("回到顶部")])])},s=[],n={name:"backToTop",props:{targetSelector:{type:String,required:!0}},data(){return{scrollTop:0,targetElement:null,scrollThreshold:300,duration:500}},computed:{isScroll(){return this.scrollTop>this.scrollThreshold}},mounted(){this.targetElement=document.getElementsByClassName(this.targetSelector)[0],this.targetElement?(this.targetElement.addEventListener("scroll",this.handleScroll),this.handleScroll()):console.error("未找到目标元素: "+this.targetSelector)},beforeDestroy(){this.targetElement&&this.targetElement.removeEventListener("scroll",this.handleScroll)},methods:{handleScroll(){this.targetElement&&(this.scrollTop=this.targetElement.scrollTop)},backToTop(){if(!this.targetElement)return;const t=this.targetElement.scrollTop,e=performance.now(),a=i=>{const s=i-e,n=Math.min(s/this.duration,1),o=1-Math.pow(1-n,2);this.targetElement.scrollTop=t-t*o,n<1&&requestAnimationFrame(a)};requestAnimationFrame(a)}}},o=n,l=(a("2db1"),a("2877")),r=Object(l["a"])(o,i,s,!1,null,"4101a614",null);e["a"]=r.exports},"2db1":function(t,e,a){"use strict";a("f8c8")},"5a2e":function(t,e,a){"use strict";a("c84d")},"914d":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"tabPage"},[t.loading?e("Loading"):t._e(),e("div",{staticClass:"tabTitle"},[e("div",{class:["t-left",""==t.placeWord?"t-left-hidden":""]},[e("el-input",{attrs:{placeholder:"请输入"+t.placeWord,"prefix-icon":"el-icon-search"},model:{value:t.searchWord,callback:function(e){t.searchWord=e},expression:"searchWord"}}),e("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("搜索")]),e("el-button",{attrs:{type:"primary"},on:{click:t.clearSearch}},[t._v("清空")])],1),e("div",{staticClass:"t-right"},[e("el-pagination",{attrs:{"current-page":t.pageNum,"page-size":t.pageSize,"pager-count":5,total:t.total,layout:"total, sizes, prev, pager, next, jumper","page-sizes":t.pageSizes},on:{"current-change":t.handlePageChange,"size-change":t.handleSizeChange}})],1)]),e("div",{staticClass:"dataList"},[e("table",{staticClass:"list"},[e("thead",[e("tr",t._l(t.filteredTableHeaders,(function(a,i){return e("th",{key:i},[t._v(" "+t._s(a.label)+" ")])})),0)]),e("tbody",t._l(t.dataList,(function(a,i){return e("tr",{key:i},t._l(t.filteredTableHeaders,(function(s,n){return e("td",{key:n},["text"===s.type?[t._v(t._s(a[s.field]))]:"image"===s.type?[e("HeadImage",{attrs:{name:a[s.field],size:30,url:a[s.urlField]}})]:"date"===s.type?[t._v(" "+t._s(t.formatTime(a[s.field]))+" ")]:"bool"===s.type?[e("span",[t._v(t._s(s.formatter?s.formatter(a[s.field]):a[s.field]))])]:"buttonGroup"===s.type?[e("div",{staticClass:"buttonGroup"},t._l(s.buttons,(function(s,n){return e("el-button",{directives:[{name:"show",rawName:"v-show",value:t.showConditional(s,t.dataList[i]),expression:"showConditional(btn, dataList[index])"}],key:n,attrs:{type:void 0===s.conditional?"primary":s.conditional?"danger":"success",size:"small"},on:{click:function(e){return t.executeMethod(s.method,a)}}},[t._v(" "+t._s(s.label)+" ")])})),1)]:[t._v(" "+t._s(a[s.field])+" ")]],2)})),0)})),0)])])],1)},s=[],n=(a("0643"),a("2382"),a("0873")),o=a("4036"),l={name:"tablepage",components:{Loading:n["a"],HeadImage:o["a"]},props:{banned:{type:Boolean,default:!1,required:!1},url:{type:String,default:"",required:!0},searchUrl:{type:String,default:"",required:!1},tableHeaders:{type:Array,default:()=>[],required:!0}},data(){return{loading:!0,pageNum:1,pageSize:10,total:0,page:0,pageSizes:[10,20,50,100],dataList:[],searchWord:"",searching:!1}},computed:{filteredTableHeaders(){return this.tableHeaders.filter(t=>("privateMessageList"===this.url||"privateSensitiveWordHit"===this.url)&&"group"!=t.conditional||(("groupMessageList"===this.url||"groupSenstiveWordHit"===this.url)&&"private"!=t.conditional||(void 0===t.conditional||t.conditional===this.banned)))},placeWord(){return"userList"===this.url||"bannedUserList"===this.url||"privateMessageList"===this.url||"groupMessageList"===this.url?"用户名":"groupList"===this.url||"bannedGroupList"===this.url?"群聊名":"sensitiveWordList"===this.url?"敏感词":""}},methods:{init(){this.getDataList()},getDataList(){this.loading=!0,this.$http({method:"post",url:"/admin/"+this.url,data:{banned:this.banned,pageNum:this.pageNum,pageSize:this.pageSize}}).then(t=>{this.dataList=t.list,this.total=t.total,this.page=Math.ceil(t.total/this.pageSize),this.loading=!1,this.searching=!1}).catch(t=>{console.log(t)})},search(){this.loading=!0,this.$http({method:"post",url:"/admin/"+this.searchUrl,data:{banned:this.banned,searchWord:this.searchWord,pageNum:this.pageNum,pageSize:this.pageSize}}).then(t=>{this.dataList=t.list,this.total=t.total,this.page=Math.ceil(t.total/this.pageSize),this.loading=!1,this.searching=!0,0===this.total&&(this.$message({type:"warning",message:"未查询到相关数据"}),this.getDataList())}).catch(t=>{console.log(t)})},handlePageChange(t){t!==this.pageNum&&(this.pageNum=t,console.log(this.searching),this.searching?this.search():this.getDataList())},handleSizeChange(t){t!==this.pageSize&&(this.pageSize=t,this.searching?this.search():this.getDataList())},executeMethod(t,e){this.$emit(t,e,t=>{1===t?this.$message({type:"success",message:"操作成功"}):this.$message({type:"error",message:"操作失败"}),this.getDataList()})},clearSearch(){this.searchWord="",this.searching&&this.getDataList()},showConditional(t,e){return"userList"===this.url||"groupList"===this.url?void 0===t.conditional||t.conditional===!this.banned:"sensitiveWordList"!==this.url||(void 0===t.conditional||t.conditional===e.enabled)},formatTime(t){const e=new Date,a=new Date(t),i=e-a,s=31536e6,n=2592e6,o=864e5,l=36e5,r=6e4,c=1e3;return i>=s?Math.floor(i/s)+"年前":i>=n?Math.floor(i/n)+"月前":i>=o?Math.floor(i/o)+"天前":i>=l?Math.floor(i/l)+"小时前":i>=r?Math.floor(i/r)+"分钟前":i>=c?Math.floor(i/c)+"秒前":"刚刚"}},mounted(){this.init()},watch:{banned(){this.pageNum=1,this.init()},url(){this.pageNum=1,this.init()}}},r=l,c=(a("5a2e"),a("2877")),d=Object(c["a"])(r,i,s,!1,null,null,null);e["a"]=d.exports},b3f6:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"box"},[e("div",{staticClass:"title"},[e("span",{staticClass:"icon iconfont icon-group"},[t._v("群聊管理 > "+t._s(t.banned?"封禁":"")+"群聊列表")])]),e("div",{staticClass:"main"},[e("tablepage",{attrs:{searchUrl:t.searchUrl,banned:t.banned,url:t.url,tableHeaders:t.tableHeaders},on:{modify:t.modify,ban:t.ban,unban:t.unban}})],1),e("backToTop",{attrs:{targetSelector:"box"}})],1)},s=[],n=a("914d"),o=a("24aa"),l={name:"groupList",props:{banned:{type:Boolean,default:!1,required:!0}},components:{tablepage:n["a"],backToTop:o["a"]},data(){return{url:"groupList",searchUrl:"findGroup",tableHeaders:[{label:"ID",field:"id",type:"text"},{label:"群聊名称",field:"name",type:"text"},{label:"群聊头像",field:"name",urlField:"headImageThumb",type:"image"},{label:"群公告",field:"notice",type:"text"},{label:"封禁原因",field:"reason",type:"text",conditional:!0},{label:"操作",type:"buttonGroup",buttons:[{label:"修改",method:"modify",conditional:void 0},{label:"解封",method:"unban",conditional:!1},{label:"封禁",method:"ban",conditional:!0}]}]}},methods:{modify(t,e){console.log("修改功能"),console.log(t),e(1)},ban(t,e){console.log("封禁功能"),console.log(t),e(1)},unban(t,e){console.log("解封功能"),console.log(t),e(1)}},computed:{}},r=l,c=a("2877"),d=Object(c["a"])(r,i,s,!1,null,null,null);e["default"]=d.exports},be96:function(t,e,a){"use strict";a("cbcb")},c84d:function(t,e,a){},cbcb:function(t,e,a){},f8c8:function(t,e,a){}}]);
//# sourceMappingURL=chunk-6db636c9.7ff17cec.js.map