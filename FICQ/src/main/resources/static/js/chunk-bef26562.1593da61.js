(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bef26562"],{"0873":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"loading-overlay"},[e("div",{staticClass:"loading-spinner"}),e("h3",[t._v("加载中"),e("span",{staticClass:"dots"},[t._v(t._s(t.dots))])])])},s=[],r={name:"Loading",data(){return{dotCount:1,dots:"."}},mounted(){this.dotInterval=setInterval(()=>{this.dotCount=this.dotCount%3+1,this.dots=".".repeat(this.dotCount)},500)},beforeUnmount(){clearInterval(this.dotInterval)}},n=r,o=(a("be96"),a("2877")),l=Object(o["a"])(n,i,s,!1,null,"086c7a5b",null);e["a"]=l.exports},"24aa":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.isScroll,expression:"isScroll"}],staticClass:"back-to-top",on:{click:t.backToTop}},[e("span",{staticClass:"icon iconfont icon-xiangshang"},[t._v("回到顶部")])])},s=[],r={name:"backToTop",props:{targetSelector:{type:String,required:!0}},data(){return{scrollTop:0,targetElement:null,scrollThreshold:300,duration:500}},computed:{isScroll(){return this.scrollTop>this.scrollThreshold}},mounted(){this.targetElement=document.getElementsByClassName(this.targetSelector)[0],this.targetElement?(this.targetElement.addEventListener("scroll",this.handleScroll),this.handleScroll()):console.error("未找到目标元素: "+this.targetSelector)},beforeDestroy(){this.targetElement&&this.targetElement.removeEventListener("scroll",this.handleScroll)},methods:{handleScroll(){this.targetElement&&(this.scrollTop=this.targetElement.scrollTop)},backToTop(){if(!this.targetElement)return;const t=this.targetElement.scrollTop,e=performance.now(),a=i=>{const s=i-e,r=Math.min(s/this.duration,1),n=1-Math.pow(1-r,2);this.targetElement.scrollTop=t-t*n,r<1&&requestAnimationFrame(a)};requestAnimationFrame(a)}}},n=r,o=(a("2db1"),a("2877")),l=Object(o["a"])(n,i,s,!1,null,"4101a614",null);e["a"]=l.exports},"2db1":function(t,e,a){"use strict";a("f8c8")},"5a2e":function(t,e,a){"use strict";a("c84d")},"914d":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"tabPage"},[t.loading?e("Loading"):t._e(),e("div",{staticClass:"tabTitle"},[e("div",{class:["t-left",""==t.placeWord?"t-left-hidden":""]},[e("el-input",{attrs:{placeholder:"请输入"+t.placeWord,"prefix-icon":"el-icon-search"},model:{value:t.searchWord,callback:function(e){t.searchWord=e},expression:"searchWord"}}),e("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("搜索")]),e("el-button",{attrs:{type:"primary"},on:{click:t.clearSearch}},[t._v("清空")])],1),e("div",{staticClass:"t-right"},[e("el-pagination",{attrs:{"current-page":t.pageNum,"page-size":t.pageSize,"pager-count":5,total:t.total,layout:"total, sizes, prev, pager, next, jumper","page-sizes":t.pageSizes},on:{"current-change":t.handlePageChange,"size-change":t.handleSizeChange}})],1)]),e("div",{staticClass:"dataList"},[e("table",{staticClass:"list"},[e("thead",[e("tr",t._l(t.filteredTableHeaders,(function(a,i){return e("th",{key:i},[t._v(" "+t._s(a.label)+" ")])})),0)]),e("tbody",t._l(t.dataList,(function(a,i){return e("tr",{key:i},t._l(t.filteredTableHeaders,(function(s,r){return e("td",{key:r},["text"===s.type?[t._v(t._s(a[s.field]))]:"image"===s.type?[e("HeadImage",{attrs:{name:a[s.field],size:30,url:a[s.urlField]}})]:"date"===s.type?[t._v(" "+t._s(t.formatTime(a[s.field]))+" ")]:"bool"===s.type?[e("span",[t._v(t._s(s.formatter?s.formatter(a[s.field]):a[s.field]))])]:"buttonGroup"===s.type?[e("div",{staticClass:"buttonGroup"},t._l(s.buttons,(function(s,r){return e("el-button",{directives:[{name:"show",rawName:"v-show",value:t.showConditional(s,t.dataList[i]),expression:"showConditional(btn, dataList[index])"}],key:r,attrs:{type:void 0===s.conditional?"primary":s.conditional?"danger":"success",size:"small"},on:{click:function(e){return t.executeMethod(s.method,a)}}},[t._v(" "+t._s(s.label)+" ")])})),1)]:[t._v(" "+t._s(a[s.field])+" ")]],2)})),0)})),0)])])],1)},s=[],r=(a("0643"),a("2382"),a("0873")),n=a("4036"),o={name:"tablepage",components:{Loading:r["a"],HeadImage:n["a"]},props:{banned:{type:Boolean,default:!1,required:!1},url:{type:String,default:"",required:!0},searchUrl:{type:String,default:"",required:!1},tableHeaders:{type:Array,default:()=>[],required:!0}},data(){return{loading:!0,pageNum:1,pageSize:10,total:0,page:0,pageSizes:[10,20,50,100],dataList:[],searchWord:"",searching:!1}},computed:{filteredTableHeaders(){return this.tableHeaders.filter(t=>("privateMessageList"===this.url||"privateSensitiveWordHit"===this.url)&&"group"!=t.conditional||(("groupMessageList"===this.url||"groupSenstiveWordHit"===this.url)&&"private"!=t.conditional||(void 0===t.conditional||t.conditional===this.banned)))},placeWord(){return"userList"===this.url||"bannedUserList"===this.url||"privateMessageList"===this.url||"groupMessageList"===this.url?"用户名":"groupList"===this.url||"bannedGroupList"===this.url?"群聊名":"sensitiveWordList"===this.url?"敏感词":""}},methods:{init(){this.getDataList()},getDataList(){this.loading=!0,this.$http({method:"post",url:"/admin/"+this.url,data:{banned:this.banned,pageNum:this.pageNum,pageSize:this.pageSize}}).then(t=>{this.dataList=t.list,this.total=t.total,this.page=Math.ceil(t.total/this.pageSize),this.loading=!1,this.searching=!1}).catch(t=>{console.log(t)})},search(){this.loading=!0,this.$http({method:"post",url:"/admin/"+this.searchUrl,data:{banned:this.banned,searchWord:this.searchWord,pageNum:this.pageNum,pageSize:this.pageSize}}).then(t=>{this.dataList=t.list,this.total=t.total,this.page=Math.ceil(t.total/this.pageSize),this.loading=!1,this.searching=!0,0===this.total&&(this.$message({type:"warning",message:"未查询到相关数据"}),this.getDataList())}).catch(t=>{console.log(t)})},handlePageChange(t){t!==this.pageNum&&(this.pageNum=t,console.log(this.searching),this.searching?this.search():this.getDataList())},handleSizeChange(t){t!==this.pageSize&&(this.pageSize=t,this.searching?this.search():this.getDataList())},executeMethod(t,e){this.$emit(t,e,t=>{1===t?this.$message({type:"success",message:"操作成功"}):this.$message({type:"error",message:"操作失败"}),this.getDataList()})},clearSearch(){this.searchWord="",this.searching&&this.getDataList()},showConditional(t,e){return"userList"===this.url||"groupList"===this.url?void 0===t.conditional||t.conditional===!this.banned:"sensitiveWordList"!==this.url||(void 0===t.conditional||t.conditional===e.enabled)},formatTime(t){const e=new Date,a=new Date(t),i=e-a,s=31536e6,r=2592e6,n=864e5,o=36e5,l=6e4,c=1e3;return i>=s?Math.floor(i/s)+"年前":i>=r?Math.floor(i/r)+"月前":i>=n?Math.floor(i/n)+"天前":i>=o?Math.floor(i/o)+"小时前":i>=l?Math.floor(i/l)+"分钟前":i>=c?Math.floor(i/c)+"秒前":"刚刚"}},mounted(){this.init()},watch:{banned(){this.pageNum=1,this.init()},url(){this.pageNum=1,this.init()}}},l=o,c=(a("5a2e"),a("2877")),d=Object(c["a"])(l,i,s,!1,null,null,null);e["a"]=d.exports},be96:function(t,e,a){"use strict";a("cbcb")},c84d:function(t,e,a){},cbcb:function(t,e,a){},d3f2:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"box"},[t._m(0),e("div",{staticClass:"main"},[e("tablepage",{attrs:{url:t.messageType+"SensitiveWordHit",tableHeaders:t.tableHeaders}})],1),e("backToTop",{attrs:{targetSelector:"box"}})],1)},s=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"title"},[e("span",{staticClass:"icon iconfont icon-minganciciku"},[t._v("敏感词管理 > 敏感词命中")])])}],r=a("914d"),n=a("24aa"),o={name:"sensitiveWordHit",components:{tablepage:r["a"],backToTop:n["a"]},props:{messageType:{type:String,default:"private",required:!0}},data(){return{tableHeaders:[{label:"ID",field:"id",type:"text"},{label:"发送用户ID",field:"sendId",type:"text"},{label:"群聊ID",field:"groupId",type:"text",conditional:"group"},{label:"接受用户ID",field:"recvId",type:"text",conditional:"private"},{label:"消息内容",field:"content",type:"text"},{label:"发送时间",field:"sendTime",type:"date"},{label:"操作",type:"buttonGroup",buttons:[{label:"撤回",method:"exampleMethod"}]}]}}},l=o,c=a("2877"),d=Object(c["a"])(l,i,s,!1,null,null,null);e["default"]=d.exports},f8c8:function(t,e,a){}}]);
//# sourceMappingURL=chunk-bef26562.1593da61.js.map