(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-66aa74b7"],{"0873":function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"loading-overlay"},[e("div",{staticClass:"loading-spinner"}),e("h3",[t._v("加载中"),e("span",{staticClass:"dots"},[t._v(t._s(t.dots))])])])},i=[],o={name:"Loading",data(){return{dotCount:1,dots:"."}},mounted(){this.dotInterval=setInterval(()=>{this.dotCount=this.dotCount%3+1,this.dots=".".repeat(this.dotCount)},500)},beforeUnmount(){clearInterval(this.dotInterval)}},n=o,l=(a("be96"),a("2877")),r=Object(l["a"])(n,s,i,!1,null,"086c7a5b",null);e["a"]=r.exports},"24aa":function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.isScroll,expression:"isScroll"}],staticClass:"back-to-top",on:{click:t.backToTop}},[e("span",{staticClass:"icon iconfont icon-xiangshang"},[t._v("回到顶部")])])},i=[],o={name:"backToTop",props:{targetSelector:{type:String,required:!0}},data(){return{scrollTop:0,targetElement:null,scrollThreshold:300,duration:500}},computed:{isScroll(){return this.scrollTop>this.scrollThreshold}},mounted(){this.targetElement=document.getElementsByClassName(this.targetSelector)[0],this.targetElement?(this.targetElement.addEventListener("scroll",this.handleScroll),this.handleScroll()):console.error("未找到目标元素: "+this.targetSelector)},beforeDestroy(){this.targetElement&&this.targetElement.removeEventListener("scroll",this.handleScroll)},methods:{handleScroll(){this.targetElement&&(this.scrollTop=this.targetElement.scrollTop)},backToTop(){if(!this.targetElement)return;const t=this.targetElement.scrollTop,e=performance.now(),a=s=>{const i=s-e,o=Math.min(i/this.duration,1),n=1-Math.pow(1-o,2);this.targetElement.scrollTop=t-t*n,o<1&&requestAnimationFrame(a)};requestAnimationFrame(a)}}},n=o,l=(a("2db1"),a("2877")),r=Object(l["a"])(n,s,i,!1,null,"4101a614",null);e["a"]=r.exports},"2db1":function(t,e,a){"use strict";a("f8c8")},"440c":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"box"},[t._m(0),e("div",{staticClass:"main"},[e("tablepage",{attrs:{searchUrl:t.searchUrl,url:t.url,tableHeaders:t.tableHeaders}})],1),e("backToTop",{attrs:{targetSelector:"box"}})],1)},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"title"},[e("span",{staticClass:"icon iconfont icon-minganciciku"},[t._v("敏感词管理 > 敏感词列表")])])}],o=a("914d"),n=a("24aa"),l={name:"sensitiveWordList",components:{tablepage:o["a"],backToTop:n["a"]},data(){return{url:"sensitiveWordList",searchUrl:"findSensitiveWord",tableHeaders:[{label:"ID",field:"id",type:"text"},{label:"敏感词",field:"content",type:"text"},{label:"创建时间",field:"createTime",type:"date"},{label:"启用状态",field:"enabled",type:"bool",formatter:t=>!1===t?"禁用":"启用"},{label:"操作",type:"buttonGroup",buttons:[{label:"修改",method:"modify"},{label:"启用",method:"enable",conditional:!1},{label:"禁用",method:"disable",conditional:!0}]}]}},methods:{modify(t,e){console.log("修改功能"),console.log(t),e(1)},enable(t,e){console.log("启用功能"),console.log(t),e(1)},disable(t,e){console.log("禁用功能"),console.log(t),e(1)}},computed:{}},r=l,c=a("2877"),d=Object(c["a"])(r,s,i,!1,null,null,null);e["default"]=d.exports},"5a2e":function(t,e,a){"use strict";a("c84d")},"914d":function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"tabPage"},[t.loading?e("Loading"):t._e(),e("div",{staticClass:"tabTitle"},[e("div",{class:["t-left",""==t.placeWord?"t-left-hidden":""]},[e("el-input",{attrs:{placeholder:"请输入"+t.placeWord,"prefix-icon":"el-icon-search"},model:{value:t.searchWord,callback:function(e){t.searchWord=e},expression:"searchWord"}}),e("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("搜索")]),e("el-button",{attrs:{type:"primary"},on:{click:t.clearSearch}},[t._v("清空")])],1),e("div",{staticClass:"t-right"},[e("el-pagination",{attrs:{"current-page":t.pageNum,"page-size":t.pageSize,"pager-count":5,total:t.total,layout:"total, sizes, prev, pager, next, jumper","page-sizes":t.pageSizes},on:{"current-change":t.handlePageChange,"size-change":t.handleSizeChange}})],1)]),e("div",{staticClass:"dataList"},[e("table",{staticClass:"list"},[e("thead",[e("tr",t._l(t.filteredTableHeaders,(function(a,s){return e("th",{key:s},[t._v(" "+t._s(a.label)+" ")])})),0)]),e("tbody",t._l(t.dataList,(function(a,s){return e("tr",{key:s},t._l(t.filteredTableHeaders,(function(i,o){return e("td",{key:o},["text"===i.type?[t._v(t._s(a[i.field]))]:"image"===i.type?[e("HeadImage",{attrs:{name:a[i.field],size:30,url:a[i.urlField]}})]:"date"===i.type?[t._v(" "+t._s(t.formatTime(a[i.field]))+" ")]:"bool"===i.type?[e("span",[t._v(t._s(i.formatter?i.formatter(a[i.field]):a[i.field]))])]:"buttonGroup"===i.type?[e("div",{staticClass:"buttonGroup"},t._l(i.buttons,(function(i,o){return e("el-button",{directives:[{name:"show",rawName:"v-show",value:t.showConditional(i,t.dataList[s]),expression:"showConditional(btn, dataList[index])"}],key:o,attrs:{type:void 0===i.conditional?"primary":i.conditional?"danger":"success",size:"small"},on:{click:function(e){return t.executeMethod(i.method,a)}}},[t._v(" "+t._s(i.label)+" ")])})),1)]:[t._v(" "+t._s(a[i.field])+" ")]],2)})),0)})),0)])])],1)},i=[],o=(a("0643"),a("2382"),a("0873")),n=a("4036"),l={name:"tablepage",components:{Loading:o["a"],HeadImage:n["a"]},props:{banned:{type:Boolean,default:!1,required:!1},url:{type:String,default:"",required:!0},searchUrl:{type:String,default:"",required:!1},tableHeaders:{type:Array,default:()=>[],required:!0}},data(){return{loading:!0,pageNum:1,pageSize:10,total:0,page:0,pageSizes:[10,20,50,100],dataList:[],searchWord:"",searching:!1}},computed:{filteredTableHeaders(){return this.tableHeaders.filter(t=>("privateMessageList"===this.url||"privateSensitiveWordHit"===this.url)&&"group"!=t.conditional||(("groupMessageList"===this.url||"groupSenstiveWordHit"===this.url)&&"private"!=t.conditional||(void 0===t.conditional||t.conditional===this.banned)))},placeWord(){return"userList"===this.url||"bannedUserList"===this.url||"privateMessageList"===this.url||"groupMessageList"===this.url?"用户名":"groupList"===this.url||"bannedGroupList"===this.url?"群聊名":"sensitiveWordList"===this.url?"敏感词":""}},methods:{init(){this.getDataList()},getDataList(){this.loading=!0,this.$http({method:"post",url:"/admin/"+this.url,data:{banned:this.banned,pageNum:this.pageNum,pageSize:this.pageSize}}).then(t=>{this.dataList=t.list,this.total=t.total,this.page=Math.ceil(t.total/this.pageSize),this.loading=!1,this.searching=!1}).catch(t=>{console.log(t)})},search(){this.loading=!0,this.$http({method:"post",url:"/admin/"+this.searchUrl,data:{banned:this.banned,searchWord:this.searchWord,pageNum:this.pageNum,pageSize:this.pageSize}}).then(t=>{this.dataList=t.list,this.total=t.total,this.page=Math.ceil(t.total/this.pageSize),this.loading=!1,this.searching=!0,0===this.total&&(this.$message({type:"warning",message:"未查询到相关数据"}),this.getDataList())}).catch(t=>{console.log(t)})},handlePageChange(t){t!==this.pageNum&&(this.pageNum=t,console.log(this.searching),this.searching?this.search():this.getDataList())},handleSizeChange(t){t!==this.pageSize&&(this.pageSize=t,this.searching?this.search():this.getDataList())},executeMethod(t,e){this.$emit(t,e,t=>{1===t?this.$message({type:"success",message:"操作成功"}):this.$message({type:"error",message:"操作失败"}),this.getDataList()})},clearSearch(){this.searchWord="",this.searching&&this.getDataList()},showConditional(t,e){return"userList"===this.url||"groupList"===this.url?void 0===t.conditional||t.conditional===!this.banned:"sensitiveWordList"!==this.url||(void 0===t.conditional||t.conditional===e.enabled)},formatTime(t){const e=new Date,a=new Date(t),s=e-a,i=31536e6,o=2592e6,n=864e5,l=36e5,r=6e4,c=1e3;return s>=i?Math.floor(s/i)+"年前":s>=o?Math.floor(s/o)+"月前":s>=n?Math.floor(s/n)+"天前":s>=l?Math.floor(s/l)+"小时前":s>=r?Math.floor(s/r)+"分钟前":s>=c?Math.floor(s/c)+"秒前":"刚刚"}},mounted(){this.init()},watch:{banned(){this.pageNum=1,this.init()},url(){this.pageNum=1,this.init()}}},r=l,c=(a("5a2e"),a("2877")),d=Object(c["a"])(r,s,i,!1,null,null,null);e["a"]=d.exports},be96:function(t,e,a){"use strict";a("cbcb")},c84d:function(t,e,a){},cbcb:function(t,e,a){},f8c8:function(t,e,a){}}]);
//# sourceMappingURL=chunk-66aa74b7.099967e3.js.map